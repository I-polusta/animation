<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Whack a Cheems!!</title>
    <link
      href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700"
      rel="stylesheet"
      type="text/css"
    />
    <!-- <link rel="stylesheet" href="../animation/CSS/style.css" />
    <script src="../animation/JS/game.js"></script> -->
    <link rel="stylesheet" href="/CSS/style.css" />
    <!-- <script src="/JS/game.js"></script> -->
  </head>
  <body>
    <h1>Whack-a-cheems <span class="points">0</span></h1>
    <button onclick="start()">Starmt</button>

    <div class="container">
      <div class="pit pit1">
        <div class="cheem"></div>
      </div>
      <div class="pit pit2">
        <div class="cheem"></div>
      </div>
      <div class="pit pit3">
        <div class="cheem"></div>
      </div>
      <div class="pit pit4">
        <div class="cheem"></div>
      </div>
      <div class="pit pit5">
        <div class="cheem"></div>
      </div>
      <div class="pit pit6">
        <div class="cheem"></div>
      </div>
      <div class="pit pit7">
        <div class="cheem"></div>
      </div>
      <div class="pit pit8">
        <div class="cheem"></div>
      </div>
      <div class="pit pit9">
        <div class="cheem"></div>
      </div>
    </div>
    <!-- <script src="/JS/game.js"></script> -->
    <script>
      const pits = document.querySelectorAll(".pit");
      const pointstable = document.querySelectorAll(".points");
      const cheems = document.querySelectorAll(".cheem");
      let flag;
      let time_end = false;
      let score = 0;

      function rand__Time(lower, upper) {
        return Math.round(Math.random() * (upper - lower) + lower);
      }

      function rand__pits(pits) {
        const count = Math.floor(Math.random() * pits.length);
        const select_pit = pits[count];
        if (select_pit === flag) {
          console.log("same as last");
          return rand__pits(pits);
        }

        flag = select_pit;
        return select_pit;
      }

      function move_up() {
        const time = rand__Time(200, 1000);
        const select_pit = rand__pits(pits);
        select_pit.classList.add("up");
        setTimeout(() => {
          select_pit.classList.remove("up");

          if (!time_end) move_up();
        }, time);
      }
      function start() {
        pointstable.textContent = 0;
        time_end = false;
        score = 0;
        move_up();
        setTimeout(() => (time_end = true), 10000);
      }
      function hit() {
        score++;
        this.classList.remove("up");
        pointstable.textContent = score;
      }
      cheems.forEach((cheem) => cheem.addEventListener("click", hit));
    </script>
  </body>
</html>
